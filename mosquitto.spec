#
# This file is auto-generated. DO NOT EDIT
# Generated by: autospec.py
#
Name     : mosquitto
Version  : 1.4.8
Release  : 3
URL      : https://github.com/eclipse/mosquitto/archive/v1.4.8.tar.gz
Source0  : https://github.com/eclipse/mosquitto/archive/v1.4.8.tar.gz
Summary  : No detailed summary available
Group    : Development/Tools
License  : EPL-1.0
Requires: mosquitto-bin
Requires: mosquitto-lib
BuildRequires : cmake
BuildRequires : openssl-dev
Patch1: 0001-Remove-ldconfig.patch
Patch2: 0002-Do-not-install-man-docs.patch

%description
Mosquitto for Windows
=====================
Mosquitto for Windows comes in two flavours, win32 or Cygwin. The win32 version is only
supported on Windows Vista or later.

%package bin
Summary: bin components for the mosquitto package.
Group: Binaries

%description bin
bin components for the mosquitto package.


%package dev
Summary: dev components for the mosquitto package.
Group: Development
Requires: mosquitto-lib
Requires: mosquitto-bin
Provides: mosquitto-devel

%description dev
dev components for the mosquitto package.


%package lib
Summary: lib components for the mosquitto package.
Group: Libraries

%description lib
lib components for the mosquitto package.


%prep
cd ..
%setup -q -n mosquitto-1.4.8
%patch1 -p1
%patch2 -p1

%build
mkdir clr-build
pushd clr-build
cmake .. -G "Unix Makefiles" -DCMAKE_INSTALL_PREFIX=/usr -DBUILD_SHARED_LIBS:BOOL=ON -DLIB_INSTALL_DIR:PATH=%{_libdir}
make V=1  %{?_smp_mflags}
popd

%install
rm -rf %{buildroot}
pushd clr-build
%make_install
popd
## make_install_append content
mkdir %{buildroot}/usr/lib64
ln -s /usr/lib/libmosquitto.so %{buildroot}/usr/lib64/libmosquitto.so
ln -s /usr/lib/libmosquitto.so.1 %{buildroot}/usr/lib64/libmosquitto.so.1
ln -s /usr/lib/libmosquittopp.so %{buildroot}/usr/lib64/libmosquittopp.so
ln -s /usr/lib/libmosquittopp.so.1 %{buildroot}/usr/lib64/libmosquittopp.so.1
## make_install_append end

%files
%defattr(-,root,root,-)

%files bin
%defattr(-,root,root,-)
/usr/bin/mosquitto
/usr/bin/mosquitto_passwd
/usr/bin/mosquitto_pub
/usr/bin/mosquitto_sub

%files dev
%defattr(-,root,root,-)
/usr/include/*.h
/usr/lib/*.so
/usr/lib64/*.so

%files lib
%defattr(-,root,root,-)
/usr/lib/*.so.*
/usr/lib64/*.so.*
